  const context = canvas.getContext("2d");

  navigator.mediaDevices.getUserMedia({ video: { facingMode: "environment" } })
    .then(stream => {
      video.srcObject = stream;
      video.style.display = "block";
      const interval = setInterval(() => {
        context.drawImage(video, 0, 0, canvas.width, canvas.height);
        const imageData = context.getImageData(0, 0, canvas.width, canvas.height);
        const code = jsQR(imageData.data, canvas.width, canvas.height);
        if (code) {
          document.getElementById("to").value = code.data;
          stream.getTracks().forEach(track => track.stop());
          video.style.display = "none";
          clearInterval(interval);
        }
      }, 500);
    });
}
</script>

<!-- jsQR สำหรับสแกน QR -->
<script src="https://cdn.jsdelivr.net/npm/jsqr/dist/jsQR.js"></script>

</body>
</html>
